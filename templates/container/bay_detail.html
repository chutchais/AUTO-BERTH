{% extends "base.html" %}
{% load system_tag %}

{% block head %}
{% endblock head %}

{% block title %}
	Bay Plan
{% endblock %}

{% block stylesheet %}

td a {
    color: #000000;
}

/**
 * Tooltip Styles
 */

/* Add this attribute to the element that needs a tooltip */
[data-tooltip] {
  position: relative;
  z-index: 2;
  cursor: pointer;
}

/* Hide the tooltip content by default */
[data-tooltip]:before,
[data-tooltip]:after {
  visibility: hidden;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: progid: DXImageTransform.Microsoft.Alpha(Opacity=0);
  opacity: 0;
  pointer-events: none;
}

/* Position tooltip above the element */
[data-tooltip]:before {
  position: absolute;
  bottom: 150%;
  left: 50%;
  margin-bottom: 5px;
  margin-left: -80px;
  padding: 7px;
  width: 160px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #000;
  background-color: hsla(0, 0%, 20%, 0.9);
  color: #fff;
  content: attr(data-tooltip);
  text-align: center;
  font-size: 14px;
  line-height: 1.2;
}

/* Triangle hack to make tooltip look like a speech bubble */
[data-tooltip]:after {
  position: absolute;
  bottom: 150%;
  left: 50%;
  margin-left: -5px;
  width: 0;
  border-top: 5px solid #000;
  border-top: 5px solid hsla(0, 0%, 20%, 0.9);
  border-right: 5px solid transparent;
  border-left: 5px solid transparent;
  content: " ";
  font-size: 0;
  line-height: 0;
}

/* Show tooltip content on hover */
[data-tooltip]:hover:before,
[data-tooltip]:hover:after {
  visibility: visible;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
  filter: progid: DXImageTransform.Microsoft.Alpha(Opacity=100);
  opacity: 1;
}

{% endblock stylesheet %}


{% block form_content %}

<div class="row-full">

				<h3>Bay {{bay}}  <small> Total {{ container_list.count }} container(s) | 
				<a href="{% url 'container:bay' container_list.first.bayplanfile.slug %}">back</a></small></h3>
				
			<div class="row-full">
				{% if has_change %}
				<p class="text-right"><a href='{% url "container:bay-restore" container_list.first.bayplanfile.slug container_list.first.bay %}'>Set all to original</a>
				</p>
				{% endif %}

							
								
						<table class="table table-bordered">
							<tr>
								<td class="text-left">
									
										<a href="?mode=container">Container</a> | 
										<a href="?mode=weight">Weight</a>
									
								</td>
								<td class="text-right">
								
									<a href='{% url "container:bay-ready" container_list.first.bayplanfile.slug container_list.first.bay %}?action=set'>Ready</a>
									|
									<a href='{% url "container:bay-ready" container_list.first.bayplanfile.slug container_list.first.bay %}?action=clear'>Not Ready</a>
								
								</td>
							</tr>
						</table>
			</div>


				<table class="table table-bordered">
					<!-- Under Deck -->

										 <!-- Tier Information -->
					<tr class="active">
						<th></th>
						{% for t in tier %}
							 <th class="text-center">{{t}}</th>
						{% endfor %} 
				    </tr>
				    <!-- End Tier information -->

				     <!-- Row/Stack Information -->
				     {% for row in over_deck %}
					<tr>
						<td class="text-center">{{row}}</td>

						{% for t in tier %}
							{% combine_stowage bay t row as new_stowage %}
							{% first_container container_list new_stowage as first_cont  %}

							<td {{first_cont.get_dischart_style|safe }}>

								{% for x in container_list|in_stowage:new_stowage %}
									{% if q == x.container %}
										<div class="bg-danger text-black">
									{% else %}
										<div>
									{% endif %}
												{% weight x.weight as new_weight %}
												{% if x.original_stowage != x.stowage %}
													<b>
														<a href="{{ x.get_absolute_url }}" 
															data-tooltip="{{x.get_tooltip|safe}}">
															{% if mode  %}
																{{x.container }}
															{% else %}
																{{new_weight }}
															{% endif %}
														</a>
													</b><br>
												{% else %}
													<a href="{{ x.get_absolute_url }}" 
															data-tooltip="{{x.get_tooltip|safe}}">
															{% if mode  %}
																{{x.container }}
															{% else %}
																{{new_weight }}
															{% endif %}
														</a><br>
												{% endif %}
										</div>
								{% endfor %}
								
							</td>
						{% endfor %}

					 </tr>
					{% endfor %}
					 <!-- End Row/Stack Information -->
				    <!-- End Under Deck -->
				</table>
			</div>


			<div>
				<table class="table table-bordered">
					<!-- Under Deck -->
				     <!-- Row/Stack Information -->
				     {% for row in under_deck %}
					<tr>
						<td class="text-center">{{row}}</td>
						{% for t in tier %}
							{% combine_stowage bay t row as new_stowage %}
							{% first_container container_list new_stowage as first_cont  %}

							<td {{first_cont.get_dischart_style|safe }}>
							
								{% for x in container_list|in_stowage:new_stowage %}
									{% if q == x.container %}
										<div class="bg-danger text-white">
									{% else %}
										<div>
									{% endif %}
												{% weight x.weight as new_weight %}
												{% if x.original_stowage != x.stowage %}
													<b><a href="{{ x.get_absolute_url }}" 
															data-tooltip="{{x.get_tooltip|safe}}">
															{% if mode  %}
																{{x.container }}
															{% else %}
																{{new_weight }}
															{% endif %}
														</a></b><br>
												{% else %}
													
													<a href="{{ x.get_absolute_url }}" 
															data-tooltip="{{x.get_tooltip|safe}}">
															{% if mode  %}
																{{x.container }}
															{% else %}
																{{new_weight}}
															{% endif %}
														</a><br>
												{% endif %}
										</div>

								{% endfor %}
								
							</td>
						{% endfor %}
					 </tr>
					{% endfor %}
					 <!-- End Row/Stack Information -->


					 <!-- Tier Information class="col-md-1"-->
					<tr class="active">
						<th></th>
						{% for t in tier %}
							 <th class="text-center">{{t}}</th>
						{% endfor %} 
				    </tr>
				    <!-- End Tier information -->
				    <!-- End Under Deck -->
				</table>
			</div>

</div>

{% endblock form_content %}


{% block java_content %}
<!-- <script>
$(document).ready(function(){
    $("a").click(function(){
        alert("The paragraph was clicked.");
    });
});
</script> -->
{% endblock java_content %}